{
    "openapi": "3.1.0",
    "info": {
        "title": "API Gateway",
        "description": "\n        三层API架构的工作流代理网关\n\n        ## API层级\n\n        - **Public API** (`/api/v1/public/*`) - 无需认证的公开接口\n        - **App API** (`/api/v1/app/*`) - 需要Supabase OAuth认证的应用接口\n        - **MCP API** (`/api/v1/mcp/*`) - 需要API Key认证的LLM客户端接口\n\n        ## 认证方式\n\n        - **App API**: 使用 `Authorization: Bearer <supabase_jwt_token>`\n        - **MCP API**: 使用 `X-API-Key: <api_key>` 或 `Authorization: Bearer <api_key>`\n        ",
        "version": "1.0.0"
    },
    "paths": {
        "/api/v1/public/health": {
            "get": {
                "tags": [
                    "Public API",
                    "Public - Health"
                ],
                "summary": "Health Check Endpoint",
                "description": "Health check endpoint - 公开健康检查接口",
                "operationId": "health_check_endpoint_api_v1_public_health_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HealthCheckModel"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/v1/public/status": {
            "get": {
                "tags": [
                    "Public API",
                    "Public - Status"
                ],
                "summary": "Get System Status",
                "description": "Get comprehensive system status information.\n\nReturns:\n    SystemStatusResponse: Complete system status including health checks",
                "operationId": "get_system_status_api_v1_public_status_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SystemStatusResponse"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/v1/public/version": {
            "get": {
                "tags": [
                    "Public API",
                    "Public - Status"
                ],
                "summary": "Get Version",
                "description": "Get simple version information.\n\nReturns:\n    Dict: Version and basic system info",
                "operationId": "get_version_api_v1_public_version_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/v1/public/docs": {
            "get": {
                "tags": [
                    "Public API",
                    "Public - Documentation"
                ],
                "summary": "Redirect To Docs",
                "description": "Redirect to API documentation.\n\nReturns:\n    RedirectResponse: Redirect to the main API docs (accessible without auth)",
                "operationId": "redirect_to_docs_api_v1_public_docs_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/v1/public/redoc": {
            "get": {
                "tags": [
                    "Public API",
                    "Public - Documentation"
                ],
                "summary": "Redirect To Redoc",
                "description": "Redirect to ReDoc documentation.\n\nReturns:\n    RedirectResponse: Redirect to the ReDoc interface",
                "operationId": "redirect_to_redoc_api_v1_public_redoc_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/v1/public/openapi": {
            "get": {
                "tags": [
                    "Public API",
                    "Public - Documentation"
                ],
                "summary": "Get Openapi Info",
                "description": "Get OpenAPI specification information.\n\nReturns:\n    Dict: Information about the OpenAPI specification",
                "operationId": "get_openapi_info_api_v1_public_openapi_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/v1/public/validation/stats": {
            "get": {
                "tags": [
                    "Public API",
                    "Public - Validation"
                ],
                "summary": "Get Validation Stats",
                "description": "Get validation service statistics and health\n获取验证服务统计信息和健康状态",
                "operationId": "get_validation_stats_api_v1_public_validation_stats_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                }
            }
        },
        "/api/v1/app/sessions": {
            "post": {
                "tags": [
                    "App API",
                    "App - Sessions"
                ],
                "summary": "Create Session",
                "description": "Create a new session - 只 init session，不新建 workflow_agent_state\n根据最新的 proto 定义，workflow_agent_state 的管理全部由 workflow_agent 服务负责",
                "operationId": "create_session_api_v1_app_sessions_post",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SessionCreate"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SessionResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "App API",
                    "App - Sessions"
                ],
                "summary": "List User Sessions",
                "description": "List all sessions for the current authenticated user\n列出当前认证用户的所有会话",
                "operationId": "list_user_sessions_api_v1_app_sessions_get",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "title": "Page"
                        }
                    },
                    {
                        "name": "page_size",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 20,
                            "title": "Page Size"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SessionListResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/app/sessions/{session_id}": {
            "get": {
                "tags": [
                    "App API",
                    "App - Sessions"
                ],
                "summary": "Get Session",
                "description": "Get session by ID with RLS\n通过ID获取会话（支持RLS）",
                "operationId": "get_session_api_v1_app_sessions__session_id__get",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "session_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Session Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SessionResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "App API",
                    "App - Sessions"
                ],
                "summary": "Delete Session",
                "description": "Delete a session with RLS\n删除会话（支持RLS）",
                "operationId": "delete_session_api_v1_app_sessions__session_id__delete",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "session_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Session Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ResponseModel"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "App API",
                    "App - Sessions"
                ],
                "summary": "Update Session",
                "description": "Update a session with RLS\n更新会话（支持RLS）",
                "operationId": "update_session_api_v1_app_sessions__session_id__put",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "session_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Session Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SessionUpdate"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SessionResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/app/chat/stream": {
            "post": {
                "tags": [
                    "App API",
                    "App - Chat"
                ],
                "summary": "流式聊天接口",
                "description": "通过SSE (Server-Sent Events) 返回AI助手的流式响应",
                "operationId": "chat_stream_api_v1_app_chat_stream_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ChatRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "成功返回SSE流",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ChatStreamResponse"
                                }
                            },
                            "text/event-stream": {
                                "schema": {
                                    "type": "string",
                                    "format": "event-stream",
                                    "example": "data: {\"type\":\"message\",\"data\":{\"text\":\"Hello\",\"role\":\"assistant\"},\"session_id\":\"123\",\"timestamp\":\"2025-07-31T00:00:00Z\"}\n\n"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ]
            }
        },
        "/api/v1/app/chat/{session_id}/history": {
            "get": {
                "tags": [
                    "App API",
                    "App - Chat"
                ],
                "summary": "Get Chat History",
                "description": "获取聊天历史记录",
                "operationId": "get_chat_history_api_v1_app_chat__session_id__history_get",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "session_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Session Id"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "minimum": 1,
                            "default": 1,
                            "title": "Page"
                        }
                    },
                    {
                        "name": "page_size",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "maximum": 100,
                            "minimum": 1,
                            "default": 50,
                            "title": "Page Size"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ChatHistory"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/app/workflows/node-templates": {
            "get": {
                "tags": [
                    "App API",
                    "App - Workflows"
                ],
                "summary": "List All Node Templates",
                "description": "List all available node templates via HTTP.",
                "operationId": "list_all_node_templates_api_v1_app_workflows_node_templates_get",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "category",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Category"
                        }
                    },
                    {
                        "name": "node_type",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Node Type"
                        }
                    },
                    {
                        "name": "include_system",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": true,
                            "title": "Include System"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/NodeTemplateListResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/app/workflows/": {
            "post": {
                "tags": [
                    "App API",
                    "App - Workflows"
                ],
                "summary": "Create Workflow",
                "description": "Create a new workflow\n创建新的工作流",
                "operationId": "create_workflow_api_v1_app_workflows__post",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateWorkflowRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/WorkflowResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "get": {
                "tags": [
                    "App API",
                    "App - Workflows"
                ],
                "summary": "List Workflows",
                "description": "List workflows for the current user\n列出当前用户的工作流",
                "operationId": "list_workflows_api_v1_app_workflows__get",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "active_only",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "boolean",
                            "default": true,
                            "title": "Active Only"
                        }
                    },
                    {
                        "name": "tags",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }
                            ],
                            "title": "Tags"
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 50,
                            "title": "Limit"
                        }
                    },
                    {
                        "name": "offset",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 0,
                            "title": "Offset"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": true,
                                    "title": "Response List Workflows Api V1 App Workflows  Get"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/app/workflows/{workflow_id}": {
            "get": {
                "tags": [
                    "App API",
                    "App - Workflows"
                ],
                "summary": "Get Workflow",
                "description": "Get a workflow with user access control\n通过ID获取工作流（支持用户访问控制）",
                "operationId": "get_workflow_api_v1_app_workflows__workflow_id__get",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "workflow_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Workflow Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/WorkflowResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "App API",
                    "App - Workflows"
                ],
                "summary": "Update Workflow",
                "description": "Update a workflow with user access control\n更新工作流（支持用户访问控制）",
                "operationId": "update_workflow_api_v1_app_workflows__workflow_id__put",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "workflow_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Workflow Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateWorkflowRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/WorkflowResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "App API",
                    "App - Workflows"
                ],
                "summary": "Delete Workflow",
                "description": "Delete a workflow with user access control\n删除工作流（支持用户访问控制）",
                "operationId": "delete_workflow_api_v1_app_workflows__workflow_id__delete",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "workflow_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Workflow Id"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ResponseModel"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/app/workflows/{workflow_id}/execute": {
            "post": {
                "tags": [
                    "App API",
                    "App - Workflows"
                ],
                "summary": "Execute Workflow",
                "description": "Execute a workflow with user access control\n执行工作流（支持用户访问控制）",
                "operationId": "execute_workflow_api_v1_app_workflows__workflow_id__execute_post",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "workflow_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Workflow Id"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/WorkflowExecutionRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/WorkflowExecutionResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Authentication required"
                    },
                    "403": {
                        "description": "Insufficient permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/mcp/tools": {
            "get": {
                "tags": [
                    "MCP API"
                ],
                "summary": "List Tools",
                "description": "Get list of all available MCP tools - follows MCP JSON-RPC 2.0 standard\n获取所有可用的MCP工具列表 - 遵循MCP JSON-RPC 2.0标准",
                "operationId": "list_tools_api_v1_mcp_tools_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "401": {
                        "description": "API key required"
                    },
                    "403": {
                        "description": "Insufficient API key permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                },
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ]
            }
        },
        "/api/v1/mcp/invoke": {
            "post": {
                "tags": [
                    "MCP API"
                ],
                "summary": "Invoke Tool",
                "description": "Invoke a specific MCP tool - follows MCP JSON-RPC 2.0 tools/call standard\n调用指定的MCP工具 - 遵循MCP JSON-RPC 2.0 tools/call标准",
                "operationId": "invoke_tool_api_v1_mcp_invoke_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/MCPInvokeRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "401": {
                        "description": "API key required"
                    },
                    "403": {
                        "description": "Insufficient API key permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ]
            }
        },
        "/api/v1/mcp/tools/{tool_name}": {
            "get": {
                "tags": [
                    "MCP API"
                ],
                "summary": "Get Tool Info",
                "description": "Get detailed information about a specific tool\n获取指定工具的详细信息",
                "operationId": "get_tool_info_api_v1_mcp_tools__tool_name__get",
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ],
                "parameters": [
                    {
                        "name": "tool_name",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Tool Name"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "401": {
                        "description": "API key required"
                    },
                    "403": {
                        "description": "Insufficient API key permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/mcp/health": {
            "get": {
                "tags": [
                    "MCP API"
                ],
                "summary": "Mcp Health",
                "description": "Health check for MCP service\nMCP服务健康检查",
                "operationId": "mcp_health_api_v1_mcp_health_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/MCPHealthCheck"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "API key required"
                    },
                    "403": {
                        "description": "Insufficient API key permissions"
                    },
                    "429": {
                        "description": "Rate limit exceeded"
                    },
                    "500": {
                        "description": "Internal server error"
                    }
                },
                "security": [
                    {
                        "HTTPBearer": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "ChatHistory": {
                "properties": {
                    "messages": {
                        "items": {
                            "$ref": "#/components/schemas/ChatMessage"
                        },
                        "type": "array",
                        "title": "Messages",
                        "description": "聊天消息列表"
                    },
                    "session_id": {
                        "type": "string",
                        "title": "Session Id",
                        "description": "会话ID"
                    },
                    "total_count": {
                        "type": "integer",
                        "title": "Total Count",
                        "description": "消息总数",
                        "default": 0
                    },
                    "page": {
                        "type": "integer",
                        "title": "Page",
                        "description": "当前页码",
                        "default": 1
                    },
                    "page_size": {
                        "type": "integer",
                        "title": "Page Size",
                        "description": "每页大小",
                        "default": 50
                    }
                },
                "type": "object",
                "required": [
                    "session_id"
                ],
                "title": "ChatHistory",
                "description": "聊天历史模型"
            },
            "ChatMessage": {
                "properties": {
                    "id": {
                        "anyOf": [
                            {
                                "type": "integer"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Id",
                        "description": "消息ID"
                    },
                    "session_id": {
                        "type": "string",
                        "title": "Session Id",
                        "description": "会话ID"
                    },
                    "user_id": {
                        "type": "string",
                        "title": "User Id",
                        "description": "用户ID"
                    },
                    "message_type": {
                        "$ref": "#/components/schemas/MessageType",
                        "description": "消息类型"
                    },
                    "content": {
                        "type": "string",
                        "title": "Content",
                        "description": "消息内容",
                        "default": ""
                    },
                    "sequence_number": {
                        "anyOf": [
                            {
                                "type": "integer"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Sequence Number",
                        "description": "消息序号"
                    },
                    "created_at": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Created At",
                        "description": "创建时间"
                    }
                },
                "type": "object",
                "required": [
                    "session_id",
                    "user_id",
                    "message_type"
                ],
                "title": "ChatMessage",
                "description": "聊天消息模型 - 符合 chats 表结构"
            },
            "ChatRequest": {
                "properties": {
                    "session_id": {
                        "type": "string",
                        "title": "Session Id",
                        "description": "会话ID"
                    },
                    "user_message": {
                        "type": "string",
                        "title": "User Message",
                        "description": "用户消息内容"
                    }
                },
                "type": "object",
                "required": [
                    "session_id",
                    "user_message"
                ],
                "title": "ChatRequest",
                "description": "聊天请求模型"
            },
            "ChatSSEEvent": {
                "properties": {
                    "type": {
                        "$ref": "#/components/schemas/SSEEventType",
                        "description": "事件类型"
                    },
                    "data": {
                        "additionalProperties": true,
                        "type": "object",
                        "title": "Data",
                        "description": "事件数据，结构根据type而定"
                    },
                    "session_id": {
                        "type": "string",
                        "title": "Session Id",
                        "description": "会话ID"
                    },
                    "timestamp": {
                        "type": "string",
                        "title": "Timestamp",
                        "description": "ISO格式时间戳"
                    },
                    "is_final": {
                        "anyOf": [
                            {
                                "type": "boolean"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Is Final",
                        "description": "是否为最终响应",
                        "default": false
                    }
                },
                "type": "object",
                "required": [
                    "type",
                    "data",
                    "session_id",
                    "timestamp"
                ],
                "title": "ChatSSEEvent",
                "description": "聊天SSE事件模型 - 用于流式响应\n\n不同类型的事件会有不同的data结构:\n- message: MessageEventData\n- status_change: StatusChangeEventData\n- workflow: WorkflowEventData\n- error: ErrorEventData\n- debug: DebugEventData",
                "examples": [
                    {
                        "data": {
                            "role": "assistant",
                            "text": "What specific conditions should trigger the sync?"
                        },
                        "is_final": true,
                        "session_id": "2800ed2b-d902-4151-b68d-5c3381d06e46",
                        "timestamp": "2025-07-31T06:48:08.473674+00:00",
                        "type": "message"
                    },
                    {
                        "data": {
                            "current_stage": "negotiation",
                            "node_name": "negotiation_node",
                            "previous_stage": "clarification",
                            "stage_state": {}
                        },
                        "is_final": false,
                        "session_id": "2800ed2b-d902-4151-b68d-5c3381d06e46",
                        "timestamp": "2025-07-31T06:48:08.473674+00:00",
                        "type": "status_change"
                    },
                    {
                        "data": {
                            "text": "Workflow generated successfully!",
                            "workflow": {
                                "name": "Gmail to Slack Sync",
                                "nodes": []
                            }
                        },
                        "is_final": false,
                        "session_id": "2800ed2b-d902-4151-b68d-5c3381d06e46",
                        "timestamp": "2025-07-31T06:48:08.473674+00:00",
                        "type": "workflow"
                    }
                ]
            },
            "ChatStreamResponse": {
                "properties": {
                    "event_stream": {
                        "items": {
                            "$ref": "#/components/schemas/ChatSSEEvent"
                        },
                        "type": "array",
                        "title": "Event Stream",
                        "description": "SSE事件流，实际响应为text/event-stream格式"
                    }
                },
                "type": "object",
                "required": [
                    "event_stream"
                ],
                "title": "ChatStreamResponse",
                "description": "注意：实际响应为SSE (Server-Sent Events) 流式格式，此模型仅用于文档展示"
            },
            "CreateWorkflowRequest": {
                "properties": {
                    "name": {
                        "type": "string",
                        "maxLength": 255,
                        "minLength": 1,
                        "title": "Name"
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string",
                                "maxLength": 1000
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description"
                    },
                    "nodes": {
                        "items": {
                            "$ref": "#/components/schemas/NodeData"
                        },
                        "type": "array",
                        "minItems": 1,
                        "title": "Nodes"
                    },
                    "connections": {
                        "additionalProperties": true,
                        "type": "object",
                        "title": "Connections"
                    },
                    "settings": {
                        "anyOf": [
                            {
                                "$ref": "#/components/schemas/WorkflowSettingsData"
                            },
                            {
                                "type": "null"
                            }
                        ]
                    },
                    "static_data": {
                        "additionalProperties": {
                            "type": "string"
                        },
                        "type": "object",
                        "title": "Static Data"
                    },
                    "tags": {
                        "items": {
                            "type": "string"
                        },
                        "type": "array",
                        "title": "Tags"
                    },
                    "user_id": {
                        "type": "string",
                        "minLength": 1,
                        "title": "User Id"
                    },
                    "session_id": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Session Id"
                    }
                },
                "type": "object",
                "required": [
                    "name",
                    "nodes",
                    "user_id"
                ],
                "title": "CreateWorkflowRequest",
                "description": "创建工作流请求"
            },
            "HTTPValidationError": {
                "properties": {
                    "detail": {
                        "items": {
                            "$ref": "#/components/schemas/ValidationError"
                        },
                        "type": "array",
                        "title": "Detail"
                    }
                },
                "type": "object",
                "title": "HTTPValidationError"
            },
            "HealthCheckModel": {
                "properties": {
                    "service": {
                        "type": "string",
                        "title": "Service",
                        "description": "服务名称"
                    },
                    "version": {
                        "type": "string",
                        "title": "Version",
                        "description": "服务版本"
                    },
                    "status": {
                        "type": "string",
                        "title": "Status",
                        "description": "服务状态 (healthy, degraded, unhealthy)"
                    },
                    "timestamp": {
                        "type": "string",
                        "format": "date-time",
                        "title": "Timestamp",
                        "description": "检查时间"
                    },
                    "checks": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Checks",
                        "description": "详细检查结果"
                    },
                    "message": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Message",
                        "description": "状态消息"
                    },
                    "request_id": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Request Id",
                        "description": "请求ID"
                    },
                    "processing_time_ms": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Processing Time Ms",
                        "description": "处理时间（毫秒）"
                    },
                    "environment": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Environment",
                        "description": "环境"
                    },
                    "debug": {
                        "anyOf": [
                            {
                                "type": "boolean"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Debug",
                        "description": "调试模式"
                    }
                },
                "type": "object",
                "required": [
                    "service",
                    "version",
                    "status"
                ],
                "title": "HealthCheckModel",
                "description": "健康检查模型"
            },
            "MCPHealthCheck": {
                "properties": {
                    "healthy": {
                        "type": "boolean",
                        "title": "Healthy",
                        "description": "服务是否健康"
                    },
                    "version": {
                        "type": "string",
                        "title": "Version",
                        "description": "服务版本"
                    },
                    "available_tools": {
                        "items": {
                            "type": "string"
                        },
                        "type": "array",
                        "title": "Available Tools",
                        "description": "可用工具名称列表"
                    },
                    "timestamp": {
                        "type": "integer",
                        "title": "Timestamp",
                        "description": "检查时间戳"
                    },
                    "processing_time_ms": {
                        "anyOf": [
                            {
                                "type": "number"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Processing Time Ms",
                        "description": "处理时间（毫秒）"
                    },
                    "error": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Error",
                        "description": "错误信息"
                    },
                    "request_id": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Request Id",
                        "description": "请求ID"
                    }
                },
                "type": "object",
                "required": [
                    "healthy",
                    "version",
                    "timestamp"
                ],
                "title": "MCPHealthCheck",
                "description": "MCP服务健康检查模型"
            },
            "MCPInvokeRequest": {
                "properties": {
                    "name": {
                        "type": "string",
                        "title": "Name",
                        "description": "要调用的工具名称"
                    },
                    "arguments": {
                        "additionalProperties": true,
                        "type": "object",
                        "title": "Arguments",
                        "description": "工具调用参数"
                    },
                    "tool_name": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Tool Name",
                        "description": "工具名称（向后兼容）"
                    },
                    "parameters": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Parameters",
                        "description": "工具参数（向后兼容）"
                    }
                },
                "type": "object",
                "required": [
                    "name"
                ],
                "title": "MCPInvokeRequest",
                "description": "MCP工具调用请求模型 - 符合MCP tools/call标准"
            },
            "MessageType": {
                "type": "string",
                "enum": [
                    "user",
                    "assistant"
                ],
                "title": "MessageType",
                "description": "消息类型枚举"
            },
            "NodeData": {
                "properties": {
                    "id": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Id"
                    },
                    "name": {
                        "type": "string",
                        "title": "Name"
                    },
                    "type": {
                        "type": "string",
                        "title": "Type"
                    },
                    "subtype": {
                        "type": "string",
                        "title": "Subtype"
                    },
                    "type_version": {
                        "type": "integer",
                        "title": "Type Version",
                        "default": 1
                    },
                    "position": {
                        "$ref": "#/components/schemas/PositionData"
                    },
                    "parameters": {
                        "additionalProperties": {
                            "type": "string"
                        },
                        "type": "object",
                        "title": "Parameters"
                    },
                    "credentials": {
                        "additionalProperties": {
                            "type": "string"
                        },
                        "type": "object",
                        "title": "Credentials"
                    },
                    "disabled": {
                        "type": "boolean",
                        "title": "Disabled",
                        "default": false
                    },
                    "on_error": {
                        "type": "string",
                        "pattern": "^(continue|stop)$",
                        "title": "On Error",
                        "default": "continue"
                    },
                    "retry_policy": {
                        "anyOf": [
                            {
                                "$ref": "#/components/schemas/RetryPolicyData"
                            },
                            {
                                "type": "null"
                            }
                        ]
                    },
                    "notes": {
                        "additionalProperties": {
                            "type": "string"
                        },
                        "type": "object",
                        "title": "Notes"
                    },
                    "webhooks": {
                        "items": {
                            "type": "string"
                        },
                        "type": "array",
                        "title": "Webhooks"
                    }
                },
                "type": "object",
                "required": [
                    "name",
                    "type",
                    "subtype",
                    "position"
                ],
                "title": "NodeData",
                "description": "工作流节点数据"
            },
            "NodeTemplate": {
                "properties": {
                    "id": {
                        "type": "string",
                        "title": "Id"
                    },
                    "name": {
                        "type": "string",
                        "title": "Name"
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description"
                    },
                    "category": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Category"
                    },
                    "node_type": {
                        "type": "string",
                        "title": "Node Type"
                    },
                    "node_subtype": {
                        "type": "string",
                        "title": "Node Subtype"
                    },
                    "version": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Version",
                        "default": "1.0.0"
                    },
                    "is_system_template": {
                        "type": "boolean",
                        "title": "Is System Template",
                        "default": false
                    },
                    "default_parameters": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Default Parameters"
                    },
                    "required_parameters": {
                        "anyOf": [
                            {
                                "items": {
                                    "type": "string"
                                },
                                "type": "array"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Required Parameters"
                    },
                    "parameter_schema": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Parameter Schema"
                    }
                },
                "type": "object",
                "required": [
                    "id",
                    "name",
                    "node_type",
                    "node_subtype"
                ],
                "title": "NodeTemplate",
                "description": "Node Template Model"
            },
            "NodeTemplateListResponse": {
                "properties": {
                    "node_templates": {
                        "items": {
                            "$ref": "#/components/schemas/NodeTemplate"
                        },
                        "type": "array",
                        "title": "Node Templates"
                    }
                },
                "type": "object",
                "title": "NodeTemplateListResponse",
                "description": "Response model for a list of node templates."
            },
            "NodeType": {
                "type": "string",
                "enum": [
                    "trigger",
                    "action",
                    "condition",
                    "loop",
                    "webhook",
                    "api_call",
                    "email",
                    "delay"
                ],
                "title": "NodeType",
                "description": "节点类型枚举"
            },
            "PositionData": {
                "properties": {
                    "x": {
                        "type": "number",
                        "title": "X"
                    },
                    "y": {
                        "type": "number",
                        "title": "Y"
                    }
                },
                "type": "object",
                "required": [
                    "x",
                    "y"
                ],
                "title": "PositionData",
                "description": "节点位置数据"
            },
            "ResponseModel": {
                "properties": {
                    "success": {
                        "type": "boolean",
                        "title": "Success",
                        "description": "请求是否成功",
                        "default": true
                    },
                    "message": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Message",
                        "description": "响应消息"
                    },
                    "timestamp": {
                        "type": "string",
                        "format": "date-time",
                        "title": "Timestamp",
                        "description": "响应时间戳"
                    }
                },
                "type": "object",
                "title": "ResponseModel",
                "description": "API响应基础模型"
            },
            "RetryPolicyData": {
                "properties": {
                    "max_tries": {
                        "type": "integer",
                        "maximum": 10.0,
                        "minimum": 1.0,
                        "title": "Max Tries",
                        "default": 3
                    },
                    "wait_between_tries": {
                        "type": "integer",
                        "maximum": 300.0,
                        "minimum": 1.0,
                        "title": "Wait Between Tries",
                        "default": 5
                    }
                },
                "type": "object",
                "title": "RetryPolicyData",
                "description": "重试策略数据"
            },
            "SSEEventType": {
                "type": "string",
                "enum": [
                    "message",
                    "status_change",
                    "workflow",
                    "error",
                    "debug"
                ],
                "title": "SSEEventType",
                "description": "SSE事件类型枚举"
            },
            "Session": {
                "properties": {
                    "created_at": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "date-time"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Created At",
                        "description": "创建时间"
                    },
                    "updated_at": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "date-time"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Updated At",
                        "description": "更新时间"
                    },
                    "id": {
                        "type": "string",
                        "title": "Id",
                        "description": "唯一标识符"
                    },
                    "user_id": {
                        "type": "string",
                        "title": "User Id",
                        "description": "会话所属用户ID"
                    },
                    "workflow_id": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Workflow Id",
                        "description": "关联的工作流ID"
                    },
                    "status": {
                        "type": "string",
                        "title": "Status",
                        "description": "会话状态",
                        "default": "active"
                    },
                    "title": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Title",
                        "description": "会话标题"
                    },
                    "metadata": {
                        "additionalProperties": true,
                        "type": "object",
                        "title": "Metadata",
                        "description": "会话元数据"
                    },
                    "last_activity": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Last Activity",
                        "description": "最后活动时间"
                    }
                },
                "type": "object",
                "required": [
                    "user_id"
                ],
                "title": "Session",
                "description": "会话模型\n表示一个用户会话实例"
            },
            "SessionCreate": {
                "properties": {
                    "action": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Action",
                        "description": "会话动作类型 (create, edit, copy)",
                        "default": "create"
                    },
                    "workflow_id": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Workflow Id",
                        "description": "关联的工作流ID"
                    }
                },
                "type": "object",
                "title": "SessionCreate",
                "description": "会话创建请求模型"
            },
            "SessionListResponse": {
                "properties": {
                    "sessions": {
                        "items": {
                            "$ref": "#/components/schemas/Session"
                        },
                        "type": "array",
                        "title": "Sessions",
                        "description": "会话列表"
                    },
                    "total_count": {
                        "type": "integer",
                        "title": "Total Count",
                        "description": "总数量",
                        "default": 0
                    },
                    "page": {
                        "type": "integer",
                        "title": "Page",
                        "description": "当前页码",
                        "default": 1
                    },
                    "page_size": {
                        "type": "integer",
                        "title": "Page Size",
                        "description": "每页大小",
                        "default": 20
                    }
                },
                "type": "object",
                "title": "SessionListResponse",
                "description": "会话列表响应模型"
            },
            "SessionResponse": {
                "properties": {
                    "session": {
                        "$ref": "#/components/schemas/Session",
                        "description": "会话信息"
                    },
                    "message": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Message",
                        "description": "响应消息"
                    }
                },
                "type": "object",
                "required": [
                    "session"
                ],
                "title": "SessionResponse",
                "description": "会话响应模型"
            },
            "SessionUpdate": {
                "properties": {
                    "status": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Status",
                        "description": "会话状态"
                    },
                    "metadata": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Metadata",
                        "description": "更新的元数据"
                    },
                    "last_activity": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Last Activity",
                        "description": "最后活动时间"
                    }
                },
                "type": "object",
                "title": "SessionUpdate",
                "description": "会话更新请求模型"
            },
            "SystemStatusResponse": {
                "properties": {
                    "success": {
                        "type": "boolean",
                        "title": "Success",
                        "description": "请求是否成功",
                        "default": true
                    },
                    "message": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Message",
                        "description": "响应消息"
                    },
                    "timestamp": {
                        "type": "string",
                        "title": "Timestamp"
                    },
                    "status": {
                        "type": "string",
                        "title": "Status"
                    },
                    "version": {
                        "type": "string",
                        "title": "Version"
                    },
                    "environment": {
                        "type": "string",
                        "title": "Environment"
                    },
                    "system_info": {
                        "additionalProperties": true,
                        "type": "object",
                        "title": "System Info"
                    },
                    "services": {
                        "additionalProperties": true,
                        "type": "object",
                        "title": "Services"
                    },
                    "feature_flags": {
                        "additionalProperties": {
                            "type": "boolean"
                        },
                        "type": "object",
                        "title": "Feature Flags"
                    },
                    "api_layers": {
                        "additionalProperties": {
                            "additionalProperties": true,
                            "type": "object"
                        },
                        "type": "object",
                        "title": "Api Layers"
                    }
                },
                "type": "object",
                "required": [
                    "timestamp",
                    "status",
                    "version",
                    "environment",
                    "system_info",
                    "services",
                    "feature_flags",
                    "api_layers"
                ],
                "title": "SystemStatusResponse",
                "description": "System status response model."
            },
            "UpdateWorkflowRequest": {
                "properties": {
                    "workflow_id": {
                        "type": "string",
                        "minLength": 1,
                        "title": "Workflow Id"
                    },
                    "name": {
                        "anyOf": [
                            {
                                "type": "string",
                                "maxLength": 255,
                                "minLength": 1
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Name"
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string",
                                "maxLength": 1000
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description"
                    },
                    "nodes": {
                        "anyOf": [
                            {
                                "items": {
                                    "$ref": "#/components/schemas/NodeData"
                                },
                                "type": "array"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Nodes"
                    },
                    "connections": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Connections"
                    },
                    "settings": {
                        "anyOf": [
                            {
                                "$ref": "#/components/schemas/WorkflowSettingsData"
                            },
                            {
                                "type": "null"
                            }
                        ]
                    },
                    "static_data": {
                        "anyOf": [
                            {
                                "additionalProperties": {
                                    "type": "string"
                                },
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Static Data"
                    },
                    "tags": {
                        "anyOf": [
                            {
                                "items": {
                                    "type": "string"
                                },
                                "type": "array"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Tags"
                    },
                    "active": {
                        "anyOf": [
                            {
                                "type": "boolean"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Active"
                    },
                    "user_id": {
                        "type": "string",
                        "minLength": 1,
                        "title": "User Id"
                    },
                    "session_id": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Session Id"
                    }
                },
                "type": "object",
                "required": [
                    "workflow_id",
                    "user_id"
                ],
                "title": "UpdateWorkflowRequest",
                "description": "更新工作流请求"
            },
            "ValidationError": {
                "properties": {
                    "loc": {
                        "items": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "integer"
                                }
                            ]
                        },
                        "type": "array",
                        "title": "Location"
                    },
                    "msg": {
                        "type": "string",
                        "title": "Message"
                    },
                    "type": {
                        "type": "string",
                        "title": "Error Type"
                    }
                },
                "type": "object",
                "required": [
                    "loc",
                    "msg",
                    "type"
                ],
                "title": "ValidationError"
            },
            "WorkflowEdge": {
                "properties": {
                    "id": {
                        "type": "string",
                        "title": "Id",
                        "description": "边的唯一标识符"
                    },
                    "source": {
                        "type": "string",
                        "title": "Source",
                        "description": "源节点ID"
                    },
                    "target": {
                        "type": "string",
                        "title": "Target",
                        "description": "目标节点ID"
                    },
                    "condition": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Condition",
                        "description": "边的条件表达式"
                    },
                    "label": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Label",
                        "description": "边的标签"
                    }
                },
                "type": "object",
                "required": [
                    "id",
                    "source",
                    "target"
                ],
                "title": "WorkflowEdge",
                "description": "工作流连接边模型"
            },
            "WorkflowEntity": {
                "properties": {
                    "created_at": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "date-time"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Created At",
                        "description": "创建时间"
                    },
                    "updated_at": {
                        "anyOf": [
                            {
                                "type": "string",
                                "format": "date-time"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Updated At",
                        "description": "更新时间"
                    },
                    "id": {
                        "type": "string",
                        "title": "Id",
                        "description": "唯一标识符"
                    },
                    "user_id": {
                        "type": "string",
                        "title": "User Id",
                        "description": "工作流所有者用户ID"
                    },
                    "name": {
                        "type": "string",
                        "title": "Name",
                        "description": "工作流名称"
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description",
                        "description": "工作流描述"
                    },
                    "type": {
                        "$ref": "#/components/schemas/WorkflowType",
                        "description": "工作流类型",
                        "default": "sequential"
                    },
                    "status": {
                        "$ref": "#/components/schemas/WorkflowStatus",
                        "description": "工作流状态",
                        "default": "draft"
                    },
                    "version": {
                        "type": "integer",
                        "title": "Version",
                        "description": "工作流版本号",
                        "default": 1
                    },
                    "nodes": {
                        "items": {
                            "$ref": "#/components/schemas/WorkflowNode"
                        },
                        "type": "array",
                        "title": "Nodes",
                        "description": "工作流节点列表"
                    },
                    "edges": {
                        "items": {
                            "$ref": "#/components/schemas/WorkflowEdge"
                        },
                        "type": "array",
                        "title": "Edges",
                        "description": "工作流连接边列表"
                    },
                    "variables": {
                        "additionalProperties": true,
                        "type": "object",
                        "title": "Variables",
                        "description": "工作流变量"
                    },
                    "settings": {
                        "additionalProperties": true,
                        "type": "object",
                        "title": "Settings",
                        "description": "工作流设置"
                    },
                    "tags": {
                        "items": {
                            "type": "string"
                        },
                        "type": "array",
                        "title": "Tags",
                        "description": "工作流标签"
                    },
                    "execution_count": {
                        "type": "integer",
                        "title": "Execution Count",
                        "description": "执行次数",
                        "default": 0
                    },
                    "last_execution": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Last Execution",
                        "description": "最后执行时间"
                    }
                },
                "type": "object",
                "required": [
                    "user_id",
                    "name"
                ],
                "title": "WorkflowEntity",
                "description": "工作流实体模型\n表示完整的工作流定义"
            },
            "WorkflowExecutionRequest": {
                "properties": {
                    "inputs": {
                        "additionalProperties": true,
                        "type": "object",
                        "title": "Inputs",
                        "description": "执行时的输入参数"
                    },
                    "settings": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Settings",
                        "description": "执行时的特殊设置"
                    },
                    "metadata": {
                        "anyOf": [
                            {
                                "additionalProperties": true,
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Metadata",
                        "description": "执行元数据"
                    }
                },
                "type": "object",
                "title": "WorkflowExecutionRequest",
                "description": "工作流执行请求模型"
            },
            "WorkflowExecutionResponse": {
                "properties": {
                    "execution_id": {
                        "type": "string",
                        "title": "Execution Id",
                        "description": "执行ID"
                    },
                    "workflow_id": {
                        "type": "string",
                        "title": "Workflow Id",
                        "description": "工作流ID"
                    },
                    "status": {
                        "type": "string",
                        "title": "Status",
                        "description": "执行状态"
                    },
                    "message": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Message",
                        "description": "响应消息"
                    },
                    "started_at": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Started At",
                        "description": "开始执行时间"
                    }
                },
                "type": "object",
                "required": [
                    "execution_id",
                    "workflow_id",
                    "status"
                ],
                "title": "WorkflowExecutionResponse",
                "description": "工作流执行响应模型"
            },
            "WorkflowNode": {
                "properties": {
                    "id": {
                        "type": "string",
                        "title": "Id",
                        "description": "节点唯一标识符"
                    },
                    "type": {
                        "$ref": "#/components/schemas/NodeType",
                        "description": "节点类型"
                    },
                    "name": {
                        "type": "string",
                        "title": "Name",
                        "description": "节点名称"
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description",
                        "description": "节点描述"
                    },
                    "config": {
                        "additionalProperties": true,
                        "type": "object",
                        "title": "Config",
                        "description": "节点配置"
                    },
                    "position": {
                        "anyOf": [
                            {
                                "additionalProperties": {
                                    "type": "number"
                                },
                                "type": "object"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Position",
                        "description": "节点在画布上的位置 {x, y}"
                    },
                    "connections": {
                        "items": {
                            "type": "string"
                        },
                        "type": "array",
                        "title": "Connections",
                        "description": "连接到的下一个节点ID列表"
                    },
                    "enabled": {
                        "type": "boolean",
                        "title": "Enabled",
                        "description": "节点是否启用",
                        "default": true
                    }
                },
                "type": "object",
                "required": [
                    "id",
                    "type",
                    "name"
                ],
                "title": "WorkflowNode",
                "description": "工作流节点模型"
            },
            "WorkflowResponse": {
                "properties": {
                    "workflow": {
                        "$ref": "#/components/schemas/WorkflowEntity",
                        "description": "工作流信息"
                    },
                    "message": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Message",
                        "description": "响应消息"
                    }
                },
                "type": "object",
                "required": [
                    "workflow"
                ],
                "title": "WorkflowResponse",
                "description": "工作流响应模型"
            },
            "WorkflowSettingsData": {
                "properties": {
                    "timezone": {
                        "additionalProperties": {
                            "type": "string"
                        },
                        "type": "object",
                        "title": "Timezone"
                    },
                    "save_execution_progress": {
                        "type": "boolean",
                        "title": "Save Execution Progress",
                        "default": true
                    },
                    "save_manual_executions": {
                        "type": "boolean",
                        "title": "Save Manual Executions",
                        "default": true
                    },
                    "timeout": {
                        "type": "integer",
                        "maximum": 86400.0,
                        "minimum": 60.0,
                        "title": "Timeout",
                        "default": 3600
                    },
                    "error_policy": {
                        "type": "string",
                        "pattern": "^(continue|stop)$",
                        "title": "Error Policy",
                        "default": "continue"
                    },
                    "caller_policy": {
                        "type": "string",
                        "pattern": "^(workflow|user)$",
                        "title": "Caller Policy",
                        "default": "workflow"
                    }
                },
                "type": "object",
                "title": "WorkflowSettingsData",
                "description": "工作流设置数据"
            },
            "WorkflowStatus": {
                "type": "string",
                "enum": [
                    "draft",
                    "active",
                    "paused",
                    "completed",
                    "failed",
                    "archived"
                ],
                "title": "WorkflowStatus",
                "description": "工作流状态枚举"
            },
            "WorkflowType": {
                "type": "string",
                "enum": [
                    "sequential",
                    "parallel",
                    "conditional",
                    "loop",
                    "hybrid"
                ],
                "title": "WorkflowType",
                "description": "工作流类型枚举"
            }
        },
        "securitySchemes": {
            "HTTPBearer": {
                "type": "http",
                "scheme": "bearer"
            }
        }
    }
}