## User Requirements
{{ intent_summary }}

## Conversation Context
{% if conversation_context %}
{{ conversation_context }}
{% endif %}

## Current Workflow Status
{% if current_workflow %}
Current workflow that needs modification:
{{ current_workflow | tojson(indent=2) }}
{% endif %}

{% if debug_result %}
Debug feedback to address:
{{ debug_result }}
{% endif %}

## Task

Generate an optimal workflow that fulfills the user's requirements using the available node capabilities.

⚠️ **MANDATORY BEFORE GENERATING WORKFLOW**:
1. Call get_node_types() to see all available node types and subtypes
2. Call get_node_details() for EVERY node you plan to use in the workflow
3. Use ONLY the exact subtypes and parameters returned by MCP tools

If certain capabilities are not directly available:
1. Automatically select the best alternative approach from MCP results
2. Combine multiple nodes to achieve the desired outcome

**CRITICAL**: Your response must contain ONLY valid JSON workflow configuration. No explanatory text, no DSL format, no markdown blocks, no explanations.

Output the complete workflow as pure JSON with:
- All necessary nodes and connections
- Proper configuration for each node
- Start your response with { and end with }

Focus on delivering a working JSON solution immediately.